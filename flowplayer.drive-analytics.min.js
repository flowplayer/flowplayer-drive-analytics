/*!

   Drive analytics plugin for Flowplayer HTML5

   Copyright (c) 2016, Flowplayer Oy

   Released under the ISC License:
   https://opensource.org/licenses/ISC

*/
!function(){function e(e,o,r,t,i,a){if(n(e)){var s=new XMLHttpRequest;s.open("POST","https://api.flowplayer.org/events/play"),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=function(){s.readyState===XMLHttpRequest.DONE&&200!==s.status&&a(new Error("Request error"))},s.send(JSON.stringify({play:{src:e,seconds:o,p2p:t,playerVersion:r,finished:!!i}}))}}function n(e){var n=document.createElement("a");return n.href=e,["cdn.flowplayer.org","drive.flowplayer.org","cdn.dev.flowplayer.org"].indexOf(n.hostname)!==-1}var o=function(n){n(function(o){function r(e){e&&o.off(".drivetrack")}var t;o.on("ready",function(i,a,s){o.one("resume",function(){e(s.src,0,n.version,!1,!1,r),t=5,o.on("progress.drivetrack",function(i,a,s){s<t||(e(o.video.src,t,n.version,null,!1,r),t+=5)}),o.on("finish.drivetrack",function(){e(o.video.src,o.video.duration,n.version,null,!0,r)})})})})};"object"==typeof module&&module.exports?module.exports=o:"function"==typeof flowplayer&&o(flowplayer)}();