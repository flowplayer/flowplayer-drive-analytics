/*!

   Drive analytics plugin for Flowplayer HTML5

   Copyright (c) 2016, Flowplayer Oy

   Released under the ISC License:
   https://opensource.org/licenses/ISC

*/
!function(){function e(e,n,o,t,r,i){var s=new XMLHttpRequest;s.open("POST","https://api.flowplayer.org/events/play"),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=function(){s.readyState===XMLHttpRequest.DONE&&200!==s.status&&i(new Error("Request error"))},s.send(JSON.stringify({play:{src:e,seconds:n,p2p:t,playerVersion:o,finished:!!r}}))}var n=function(n){n(function(o){function t(e){e&&o.off(".drivetrack")}var r;o.on("ready",function(i,s,a){o.one("resume",function(){e(a.src,0,n.version,!1,!1,t),r=5,o.on("progress.drivetrack",function(i,s,a){a<r||(e(o.video.src,r,n.version,null,!1,t),r+=5)}),o.on("finish.drivetrack",function(){e(o.video.src,o.video.duration,n.version,null,!0,t)})})})})};"object"==typeof module&&module.exports?module.exports=n:"function"==typeof flowplayer&&n(flowplayer)}();